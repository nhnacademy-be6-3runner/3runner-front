<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Book List</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/index.css">
    <style>
        /*.book-thumbnail {*/
        /*    height: 200px;*/
        /*    object-fit: cover;*/
        /*}*/
        /*.card-title {*/
        /*    font-size: 1.25rem;*/
        /*    font-weight: bold;*/
        /*}*/
        /*.card-text {*/
        /*    font-size: 1rem;*/
        /*}*/
        /*.load-more-btn {*/
        /*    font-size: 1rem;*/
        /*    padding: 10px 20px;*/
        /*}*/
        /*.card {*/
        /*    margin-bottom: 20px;*/
        /*}*/
    </style>
</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>
<nav class="header-nav">
    <ul>
        <li>
            <a href="#" onclick="toggleMenu(event, 'top-category-1')">최상위 카테고리 1</a>
            <ul id="top-category-1" class="submenu">
                <li>
                    <a href="#" onclick="toggleMenu(event, 'sub-category-1-1')">상위 카테고리 1-1</a>
                    <ul id="sub-category-1-1" class="submenu">
                        <li><a href="/category/1-1-1" th:href="@{/category/1-1-1}">하위 카테고리 1-1-1</a></li>
                        <li><a href="/category/1-1-2" th:href="@{/category/1-1-2}">하위 카테고리 1-1-2</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" onclick="toggleMenu(event, 'sub-category-1-2')">상위 카테고리 1-2</a>
                    <ul id="sub-category-1-2" class="submenu">
                        <li><a href="/category/1-2-1" th:href="@{/category/1-2-1}">하위 카테고리 1-2-1</a></li>
                        <li><a href="/category/1-2-2" th:href="@{/category/1-2-2}">하위 카테고리 1-2-2</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <a href="#" onclick="toggleMenu(event, 'top-category-2')">최상위 카테고리 2</a>
            <ul id="top-category-2" class="submenu">
                <li>
                    <a href="#" onclick="toggleMenu(event, 'sub-category-2-1')">상위 카테고리 2-1</a>
                    <ul id="sub-category-2-1" class="submenu">
                        <li><a href="/category/2-1-1" th:href="@{/category/2-1-1}">하위 카테고리 2-1-1</a></li>
                        <li><a href="/category/2-1-2" th:href="@{/category/2-1-2}">하위 카테고리 2-1-2</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" onclick="toggleMenu(event, 'sub-category-2-2')">상위 카테고리 2-2</a>
                    <ul id="sub-category-2-2" class="submenu">
                        <li><a href="/category/2-2-1" th:href="@{/category/2-2-1}">하위 카테고리 2-2-1</a></li>
                        <li><a href="/category/2-2-2" th:href="@{/category/2-2-2}">하위 카테고리 2-2-2</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <!-- Add more top-level categories as needed -->
    </ul>
</nav>
<div class="container">
    <h1 class="my-4 text-center"></h1>
    <div class="book-list-items row" id="book-list-items" th:fragment="book-list">
        <div class="col-lg-3 col-md-6 col-sm-6 book-item" th:each="book : ${bookList.content}">
            <div class="card">
                <img class="card-img-top book-thumbnail" th:src="@{'/api/images/book/download?fileName=' + ${book.thumbnail}}" alt="Book Thumbnail">
                <div class="card-body">
                    <h5 class="card-title" th:text="${book.title}"></h5>
                    <p class="card-text" th:text="${book.author}"></p>
                    <p class="card-text" th:text="'가격 : ' + ${book.price}"></p>
                    <p class="card-text" th:text="'할인가 : ' + ${book.sellingPrice}"></p>
                </div>
            </div>
        </div>
    </div>
    <div class="text-center mt-4">
        <nav>
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${bookList.hasPrevious()} ? '' : 'disabled'">
                    <a class="page-link" href="#" th:onclick="'loadBooks(' + (${bookList.number} - 1) + ', ' + ${bookList.size} + '); return false;'">이전</a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, bookList.totalPages - 1)}" th:classappend="${i} == ${bookList.number} ? 'active'">
                    <a class="page-link" href="#" th:onclick="'loadBooks(' + ${i} + ', ' + ${bookList.size} + '); return false;'" th:text="${i + 1}">1</a>
                </li>
                <li class="page-item" th:classappend="${bookList.hasNext()} ? '' : 'disabled'">
                    <a class="page-link" href="#" th:onclick="'loadBooks(' + (${bookList.number} + 1) + ', ' + ${bookList.size} + '); return false;'">다음</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
<div th:replace="~{fragments/footer :: footer}"></div>
<script>
    function loadBooks(page, size) {
        window.location.href = `/book/all?page=${page}&size=${size}`;
    }
</script>
</body>
</html>
